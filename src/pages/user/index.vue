<script setup>
import { ref } from 'vue'

// è¯é£ŸåŒæºäº§å“åˆ†ç±»
const productCategories = ref([
  { name: 'é™ˆçš®ç±»', icon: 'ğŸŠ', description: 'ä¼ ç»Ÿé£Ÿæï¼ŒèŠ³é¦™æ€¡äºº', action: 'chenpi' },
  { name: 'ä½›æ‰‹ç±»', icon: 'ğŸ™', description: 'é¦™æ°”æ¸…é›…ï¼Œå£æ„Ÿç‹¬ç‰¹', action: 'foshou' },
  { name: 'æœè„¯ç±»', icon: 'ğŸ‡', description: 'é…¸ç”œå¯å£ï¼Œè¥å…»ä¸°å¯Œ', action: 'guopu' },
  { name: 'è¯è†³ç±»', icon: 'ğŸ¥„', description: 'ä¼ ç»Ÿå·¥è‰ºï¼Œç²¾å¿ƒåˆ¶ä½œ', action: 'yaoshan' }
])

// äº§å“ç‰¹è‰²ä»‹ç»
const productFeatures = ref([
  { name: 'ä¼ ç»Ÿé£å‘³', icon: 'ğŸŒ¿', description: 'å¤æ³•åˆ¶ä½œï¼Œå£å‘³çº¯æ­£', action: 'tradition' },
  { name: 'å·¥è‰ºç²¾æ¹›', icon: 'ğŸ«', description: 'é€‰æä¸¥æ ¼ï¼Œåˆ¶ä½œç²¾ç»†', action: 'craft' },
  { name: 'å£æ„Ÿä¸°å¯Œ', icon: 'ğŸ’§', description: 'å±‚æ¬¡åˆ†æ˜ï¼Œå›å‘³æ‚ é•¿', action: 'taste' },
  { name: 'è¥å…»ä»·å€¼', icon: 'ğŸ½ï¸', description: 'å¤©ç„¶é£Ÿæï¼Œè¥å…»å‡è¡¡', action: 'nutrition' }
])

// ä¼ ç»Ÿæ–‡åŒ–ä¸ç°ä»£åº”ç”¨
const cultureItems = ref([
  { name: 'ä¼ ç»Ÿå·¥è‰º', icon: 'ğŸº', action: 'tradition' },
  { name: 'ç°ä»£ç ”ç©¶', icon: 'ğŸ”¬', action: 'research' },
  { name: 'é£Ÿç”¨æŒ‡å—', icon: 'ğŸ“–', action: 'guide' },
  { name: 'è”ç³»æˆ‘ä»¬', icon: 'ğŸ“', action: 'contact' }
])



const handleCategoryClick = (category) => {
  const categoryInfo = {
    'chenpi': 'é™ˆçš®æ˜¯ä¼ ç»Ÿçš„è¯é£ŸåŒæºé£Ÿæï¼Œæ–°ä¼šé™ˆçš®æ›´æ˜¯å…¶ä¸­çš„ä¸Šå“ï¼Œå…·æœ‰ç‹¬ç‰¹çš„èŠ³é¦™å’Œé£å‘³ã€‚æˆ‘ä»¬çš„é™ˆçš®ç³»åˆ—äº§å“é‡‡ç”¨ä¼ ç»Ÿå·¥è‰ºåˆ¶ä½œï¼Œä¿æŒåŸæœ‰çš„é¦™æ°”å’Œå£æ„Ÿã€‚',
    'foshou': 'ä½›æ‰‹æ˜¯ä¼ ç»Ÿçš„é¦™æ–™é£Ÿæï¼Œæ°”å‘³èŠ³é¦™æ¸…é›…ã€‚æˆ‘ä»¬çš„ä½›æ‰‹ç³»åˆ—äº§å“ä¿æŒäº†å…¶ç‹¬ç‰¹çš„é¦™æ°”å’Œå£æ„Ÿï¼Œå¯ä½œä¸ºæ—¥å¸¸èŒ¶ç‚¹äº«ç”¨ã€‚',
    'guopu': 'ä¼ ç»Ÿæœè„¯ç±»é£Ÿå“ï¼Œé‡‡ç”¨å¤©ç„¶æ°´æœç»ä¼ ç»Ÿå·¥è‰ºåˆ¶ä½œè€Œæˆã€‚ä¿ç•™äº†æ°´æœçš„å¤©ç„¶é£å‘³ï¼Œé…¸ç”œå¯å£ï¼Œæ˜¯ç¾å‘³çš„ä¼‘é—²é›¶é£Ÿã€‚',
    'yaoshan': 'è¯è†³æ˜¯ä¸­åä¼ ç»Ÿç¾é£Ÿæ–‡åŒ–çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå°†é£Ÿæç²¾å¿ƒæ­é…ï¼Œæ—¢ç¾å‘³åˆå…·æœ‰ç‹¬ç‰¹çš„æ–‡åŒ–å†…æ¶µã€‚'
  }
  
  uni.showModal({
    title: category.name + 'ç§‘æ™®',
    content: categoryInfo[category.action] || 'ä¼ æ‰¿ä¼ ç»Ÿå·¥è‰ºï¼Œå“å‘³åœ°é“ç¾é£Ÿ',
    showCancel: false,
    confirmText: 'äº†è§£äº†'
  })
}

const handleFeatureClick = (feature) => {
  const featureInfo = {
    'tradition': 'ä¼ ç»Ÿæ½®æ±•é£Ÿå“åˆ¶ä½œå·¥è‰ºå†å²æ‚ ä¹…ï¼Œæ³¨é‡é€‰æå’Œå·¥åºï¼Œæ¯ä¸€æ­¥éƒ½å‡èšç€åŒ äººç²¾ç¥ã€‚æˆ‘ä»¬åšæŒä¼ ç»Ÿåˆ¶æ³•ï¼Œç¡®ä¿åŸæ±åŸå‘³ã€‚',
    'craft': 'ä»åŸæ–™é€‰æ‹©åˆ°åŠ å·¥åˆ¶ä½œï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ä¸¥æ ¼æŠŠæ§ã€‚é‡‡ç”¨ä¼ ç»Ÿå·¥è‰ºç»“åˆç°ä»£å«ç”Ÿæ ‡å‡†ï¼Œä¸ºæ‚¨æä¾›å®‰å…¨æ”¾å¿ƒçš„é£Ÿå“ã€‚',
    'taste': 'æˆ‘ä»¬çš„äº§å“å±‚æ¬¡ä¸°å¯Œï¼Œæœ‰çš„é…¸ç”œå¯å£ï¼Œæœ‰çš„é¦™æ°”æµ“éƒï¼Œæœ‰çš„å›å‘³æ‚ é•¿ï¼Œæ¯ä¸€ç§éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é£å‘³ç‰¹è‰²ã€‚',
    'nutrition': 'é€‰ç”¨ä¼˜è´¨å¤©ç„¶é£Ÿæï¼Œä¿ç•™é£Ÿç‰©æœ¬èº«çš„è¥å…»æˆåˆ†ã€‚ä½œä¸ºæ—¥å¸¸é›¶é£Ÿæˆ–èŒ¶ç‚¹ï¼Œä¸ºæ‚¨çš„ç”Ÿæ´»å¢æ·»ç¾å‘³ã€‚'
  }
  
  uni.showModal({
    title: feature.name + 'ä»‹ç»',
    content: featureInfo[feature.action] || 'ä¼ æ‰¿ä¼ ç»Ÿå·¥è‰ºï¼Œè¿½æ±‚å“è´¨ç¾å‘³',
    showCancel: false,
    confirmText: 'äº†è§£äº†'
  })
}

const handleCultureClick = (item) => {
  const cultureInfo = {
    'tradition': 'æ½®æ±•ä¼ ç»Ÿåˆ¶ä½œå·¥è‰ºå†å²æ‚ ä¹…ï¼Œæ³¨é‡é€‰æã€å·¥åºç²¾ç»†ï¼Œæ¯ä¸€æ­¥éƒ½ä½“ç°ç€å…ˆè¾ˆçš„æ™ºæ…§ã€‚æˆ‘ä»¬åšæŒä¼ ç»Ÿå·¥è‰ºï¼Œç¡®ä¿äº§å“çš„æ­£å®—å“è´¨ã€‚',
    'research': 'ç°ä»£ç§‘å­¦ç ”ç©¶è¯å®äº†è®¸å¤šä¼ ç»Ÿé£Ÿæçš„è¥å…»ä»·å€¼å’ŒåŠŸèƒ½æˆåˆ†ã€‚æˆ‘ä»¬ç»“åˆä¼ ç»Ÿç»éªŒä¸ç°ä»£æŠ€æœ¯ï¼Œä¸ºæ‚¨æä¾›æ›´å®‰å…¨ã€æ›´ä¼˜è´¨çš„äº§å“ã€‚',
    'guide': 'å»ºè®®é€‚é‡é£Ÿç”¨ï¼Œå› äººè€Œå¼‚ã€‚å­•å¦‡ã€å„¿ç«¥åŠç‰¹æ®Šä½“è´¨äººç¾¤è¯·å’¨è¯¢ä¸“ä¸šäººå£«åé£Ÿç”¨ã€‚ä¿æŒå‡è¡¡é¥®é£Ÿï¼Œé…åˆé€‚é‡è¿åŠ¨ã€‚',
    'contact': 'å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦äº†è§£æ›´å¤šäº§å“ä¿¡æ¯ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬ã€‚æˆ‘ä»¬å°†ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„å’¨è¯¢æœåŠ¡ã€‚'
  }
  
  uni.showModal({
    title: item.name,
    content: cultureInfo[item.action] || 'ä¼ æ‰¿ä¸åˆ›æ–°å¹¶é‡ï¼Œä¸ºæ‚¨çš„å¥åº·ä¿é©¾æŠ¤èˆª',
    showCancel: false,
    confirmText: 'çŸ¥é“äº†'
  })
}

const navigateToProducts = () => {
  uni.switchTab({
    url: '/pages/menu/index'
  })
}
</script>

<template>
  <view class="xicha-user-page">
    <!-- ç±»ä¼¼èœå•é¡µçš„é¡¶éƒ¨è®¾è®¡ -->
    <view class="top-section">
      <!-- è‡ªå®šä¹‰å¯¼èˆªæ  (åŒ…å«å®‰å…¨åŒºåŸŸ) -->
      <view class="custom-nav">
        <text class="nav-title">ä¼ ç»Ÿæ–‡åŒ–</text>
      </view>
      
      <!-- å“ç‰Œä¿¡æ¯æ  -->
      <view class="brand-info">
        <view class="brand-left">
          <text class="brand-type">æ–‡åŒ–ä¼ æ‰¿</text>
          <text class="divider">|</text>
          <text class="heritage-type">å·¥è‰ºç§‘æ™®</text>
        </view>
      </view>
      
      <!-- å“ç‰Œåç§° -->
      <view class="brand-name">
        <text class="brand-title">æ½®æ±•ä¼ æ‰¿Â·é“åœ°ç‰¹äº§</text>
        <text class="brand-desc">ä¼ æ‰¿åƒå¹´åˆ¶ä½œå·¥è‰º</text>
      </view>
      
      <!-- å“ç‰Œæ ‡è¯­ -->
      <view class="brand-slogan">
        <text class="slogan-text">authentic chaoshan heritage Â· traditional culture</text>
      </view>
    </view>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <view class="main-content">
      <!-- äº§å“åˆ†ç±»ç§‘æ™®å¡ç‰‡ -->
      <view class="category-card">
        <view class="card-header">
          <text class="card-title">äº§å“åˆ†ç±»</text>
          <view class="more-link" @tap="navigateToProducts">
            <text class="more-text">æŸ¥çœ‹å…¨éƒ¨</text>
            <text class="arrow-icon">â†’</text>
          </view>
        </view>
        
        <view class="category-grid">
          <view 
            class="category-item" 
            v-for="(category, index) in productCategories" 
            :key="index" 
            @tap="handleCategoryClick(category)"
          >
            <view class="category-icon-wrapper">
              <text class="category-icon">{{ category.icon }}</text>
            </view>
            <text class="category-label">{{ category.name }}</text>
            <text class="category-desc">{{ category.description }}</text>
          </view>
        </view>
      </view>

      <!-- åŠŸæ•ˆç§‘æ™®å¡ç‰‡ -->
      <view class="benefits-card">
        <view class="card-header">
          <text class="card-title">äº§å“ç‰¹è‰²</text>
          <text class="card-subtitle">ä¼ ç»Ÿå·¥è‰º Â· åŒ å¿ƒåˆ¶ä½œ</text>
        </view>
        
        <view class="benefits-grid">
          <view 
            class="benefit-item" 
            v-for="(feature, index) in productFeatures" 
            :key="index" 
            @tap="handleFeatureClick(feature)"
          >
            <view class="benefit-icon-bg">
              <text class="benefit-icon">{{ feature.icon }}</text>
            </view>
            <text class="benefit-label">{{ feature.name }}</text>
            <text class="benefit-desc">{{ feature.description }}</text>
          </view>
        </view>
      </view>

      <!-- æ–‡åŒ–ä¼ æ‰¿å¡ç‰‡ -->
      <view class="culture-card">
        <view class="culture-list">
          <view 
            class="culture-item" 
            v-for="(item, index) in cultureItems" 
            :key="index" 
            @tap="handleCultureClick(item)"
          >
            <view class="culture-left">
              <view class="culture-icon-wrapper">
                <text class="culture-icon">{{ item.icon }}</text>
              </view>
              <text class="culture-label">{{ item.name }}</text>
            </view>
            <view class="culture-arrow">
              <text class="arrow-right">></text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- åº•éƒ¨é—´è· -->
      <view class="bottom-space"></view>
    </view>
  </view>
</template>

<style scoped>
/* å–œèŒ¶é£æ ¼ç”¨æˆ·é¡µé¢ */
.xicha-user-page {
  min-height: 100vh;
  background: #fafafa;
}

/* é¡¶éƒ¨åŒºåŸŸ - å‚è€ƒèœå•é¡µé£æ ¼ */
.top-section {
  background: linear-gradient(135deg, #f5f2e9 0%, #e8e2d4 100%);
  padding-bottom: 32rpx;
  position: relative;
}

/* è‡ªå®šä¹‰å¯¼èˆªæ  (åŒ…å«å®‰å…¨åŒºåŸŸ) */
.custom-nav {
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 32rpx;
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
}

.nav-title {
  font-size: 32rpx;
  font-weight: 700;
  color: #3d3d3d;
}

/* å“ç‰Œä¿¡æ¯æ  */
.brand-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16rpx 32rpx;
}

.brand-left {
  display: flex;
  align-items: center;
  gap: 16rpx;
}

.brand-type, .heritage-type {
  font-size: 24rpx;
  color: #666;
  font-weight: 500;
}

.divider {
  font-size: 24rpx;
  color: #ccc;
  margin: 0 8rpx;
}

/* å“ç‰Œåç§° */
.brand-name {
  padding: 24rpx 32rpx 16rpx;
}

.brand-title {
  font-size: 40rpx;
  font-weight: 800;
  color: #333;
  margin-bottom: 8rpx;
  display: block;
  letter-spacing: 2rpx;
}

.brand-desc {
  font-size: 26rpx;
  color: #666;
  font-weight: 500;
}

/* å“ç‰Œæ ‡è¯­ */
.brand-slogan {
  padding: 0 32rpx 16rpx;
}

.slogan-text {
  font-size: 22rpx;
  color: #999;
  font-style: italic;
  letter-spacing: 1rpx;
  font-weight: 400;
}

/* ä¸»è¦å†…å®¹åŒºåŸŸ */
.main-content {
  padding: 32rpx 32rpx 32rpx;
}

/* äº§å“åˆ†ç±»å¡ç‰‡ */
.category-card {
  background: white;
  border-radius: 20rpx;
  padding: 32rpx;
  margin-bottom: 24rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx;
}

.card-title {
  font-size: 32rpx;
  font-weight: 700;
  color: #333;
}

.card-subtitle {
  font-size: 24rpx;
  color: #d4965a;
  font-weight: 500;
}

.more-link {
  display: flex;
  align-items: center;
  gap: 8rpx;
}

.more-text {
  font-size: 24rpx;
  color: #d4965a;
  font-weight: 500;
}

.arrow-icon {
  font-size: 20rpx;
  color: #d4965a;
}

.category-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24rpx;
}

.category-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20rpx;
  transition: transform 0.3s ease;
  text-align: center;
}

.category-item:active {
  transform: scale(0.95);
}

.category-icon-wrapper {
  margin-bottom: 12rpx;
}

.category-icon {
  font-size: 48rpx;
  display: block;
}

.category-label {
  font-size: 26rpx;
  color: #333;
  font-weight: 600;
  margin-bottom: 8rpx;
}

.category-desc {
  font-size: 20rpx;
  color: #888;
  text-align: center;
  line-height: 1.4;
}

/* åŠŸæ•ˆç§‘æ™®å¡ç‰‡ */
.benefits-card {
  background: white;
  border-radius: 20rpx;
  padding: 32rpx;
  margin-bottom: 24rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);
}

.benefits-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24rpx;
}

.benefit-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20rpx;
  transition: transform 0.3s ease;
  text-align: center;
}

.benefit-item:active {
  transform: scale(0.95);
}

.benefit-icon-bg {
  width: 80rpx;
  height: 80rpx;
  background: linear-gradient(135deg, #f9f7f3 0%, #f5f2e9 100%);
  border-radius: 20rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 12rpx;
  box-shadow: 0 4rpx 16rpx rgba(212, 150, 90, 0.1);
}

.benefit-icon {
  font-size: 36rpx;
}

.benefit-label {
  font-size: 24rpx;
  color: #333;
  font-weight: 600;
  margin-bottom: 8rpx;
}

.benefit-desc {
  font-size: 20rpx;
  color: #888;
  text-align: center;
  line-height: 1.4;
}

/* æ–‡åŒ–ä¼ æ‰¿å¡ç‰‡ */
.culture-card {
  background: white;
  border-radius: 20rpx;
  padding: 0;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);
  overflow: hidden;
}

.culture-list {
  display: flex;
  flex-direction: column;
}

.culture-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 32rpx;
  border-bottom: 1rpx solid #f5f5f5;
  transition: background-color 0.2s ease;
}

.culture-item:last-child {
  border-bottom: none;
}

.culture-item:active {
  background-color: #f8f9fa;
}

.culture-left {
  display: flex;
  align-items: center;
}

.culture-icon-wrapper {
  width: 64rpx;
  height: 64rpx;
  background: #f5f2e9;
  border-radius: 16rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 20rpx;
}

.culture-icon {
  font-size: 28rpx;
}

.culture-label {
  font-size: 28rpx;
  color: #333;
  font-weight: 500;
}

.culture-arrow {
  display: flex;
  align-items: center;
}

.arrow-right {
  font-size: 24rpx;
  color: #ccc;
}

.bottom-space {
  height: constant(safe-area-inset-bottom);
  height: env(safe-area-inset-bottom);
  min-height: 120rpx;
}
</style>